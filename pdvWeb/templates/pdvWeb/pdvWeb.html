{% comment %} <!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PDV</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  </head>
  <body>
    <header>
      <!-- Navigation -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">PDV</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Vendas</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Produtos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Clientes</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <!-- Main Content -->
      <div class="container-fluid mt-5">
        <div class="row">
          <div class="col-md-8">
            <div class="card mb-4">
              <div class="card-header">
                <h4 class="mb-0">Vendas</h4>
              </div>
              <div class="card-body">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Produto</th>
                      <th>Preço</th>
                      <th>Quantidade</th>
                      <th>Subtotal</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Produto 1</td>
                      <td>R$ 10,00</td>
                      <td>2</td>
                      <td>R$ 20,00</td>
                      <td><button class="btn btn-danger">Remover</button></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Produto 2</td>
                      <td>R$ 20,00</td>
                      <td>1</td>
                      <td>R$ 20,00</td>
                      <td><button class="btn btn-danger">Remover</button></td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="4" class="text-right"><strong>Total:</strong></td>
                      <td><strong>R$ 40,00</strong></td>
                      <td></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <h4 class="mb-0">Forma de Pagamento</h4>
              </div>
              <div class="card-body">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="payment1" value="option1" checked>
                  <label class="form-check-label" for="payment1">
                    Dinheiro
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="payment2" value="option2">
                  <label class="form-check-label" for="payment2">
                    Cartão de Crédito
                  </label>
                </div>
                <button class="btn btn-success mt-3">Finalizar Venda</button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card">
              <div class="card-header">
                <h4 class="mb-0">Buscar Produto</h4>
              </div>
              <div class="card-body">
                <form>
                  <div class="form-group">
                    <label for="search">Código do Produto:</label>
                    <input type="text" class="form-control" id="search" placeholder="Digite o código do produto">
                  </div>
                  <button type="submit" class="btn btn-primary">Buscar</button>
                </form>
              </div>
            </div>
            <div class="card mt-4">
              <div class="card-header">
                <h4 class="mb-0">Adicionar Produto</h4>
              </div>
              <div class="card-body">
                <form>
                  <div class="form-group">
                    <label for="product">Produto:</label>
                    <input type="text" class="form-control" id="product" placeholder="Digite o nome do produto">
                  </div>
                  <div class="form-group">
                    <label for="price">Preço:</label>
                    <input type="text" class="form-control" id="price" placeholder="Digite o preço do produto">
                  </div>
                  <div class="form-group">
                    <label for="quantity">Quantidade:</label>
                    <input type="text" class="form-control" id="quantity" placeholder="Digite a quantidade do produto">
                  </div>
                  <button type="submit" class="btn btn-primary">Adicionar</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
  </body>
</html> {% endcomment %}

<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>PDV</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  </head>
  <body>
    <header>
      <!-- Navigation -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">PDV</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Vendas</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Produtos</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Clientes</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <!-- Main Content -->
      <div class="container-fluid mt-5">
        <div class="row">
          <div class="col-md-8">
            <div class="card mb-4">
              <div class="card-header">
                <h4 class="mb-0">Vendas</h4>
              </div>
              <div class="card-body">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Produto</th>
                      <th>Preço</th>
                      <th>Quantidade</th>
                      <th>Subtotal</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Produto 1</td>
                      <td>R$ 10,00</td>
                      <td>2</td>
                      <td>R$ 20,00</td>
                      <td><button class="btn btn-danger">Remover</button></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Produto 2</td>
                      <td>R$ 20,00</td>
                      <td>1</td>
                      <td>R$ 20,00</td>
                      <td><button class="btn btn-danger">Remover</button></td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="4" class="text-right"><strong>Total:</strong></td>
                      <td><strong>R$ 40,00</strong></td>
                      <td></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <h4 class="mb-0">Forma de Pagamento</h4>
              </div>
              <div class="card-body">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="payment1" value="option1" checked>
                  <label class="form-check-label" for="payment1">
                    Dinheiro
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="payment" id="payment2" value="option2">
                  <label class="form-check-label" for="payment2">
                    Cartão de Crédito
                  </label>
               </div>
               <button class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#paymentModal">Finalizar Venda</button>
             </div>
           </div>
         </div>
       </div>
     </div>
   
     <!-- Payment Modal -->
     <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
       <div class="modal-dialog">
         <div class="modal-content">
           <div class="modal-header">
             <h5 class="modal-title" id="paymentModalLabel">Forma de Pagamento</h5>
             <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
           </div>
           <div class="modal-body">
             <form>
               <div class="mb-3">
                 <label for="amountPaid" class="form-label">Valor Pago:</label>
                 <input type="text" class="form-control" id="amountPaid">
               </div>
               <div class="mb-3">
                 <label for="totalAmount" class="form-label">Total da Compra:</label>
                 <input type="text" class="form-control" id="totalAmount" readonly>
               </div>
               <div class="mb-3">
                 <label for="change" class="form-label">Troco:</label>
                 <input type="text" class="form-control" id="change" readonly>
               </div>
               <div class="mb-3 form-check">
                 <input type="checkbox" class="form-check-input" id="splitPayment">
                 <label class="form-check-label" for="splitPayment">Dividir em parcelas</label>
               </div>
               <div class="mb-3" id="installmentSection" style="display: none;">
                 <label for="installments" class="form-label">Número de Parcelas:</label>
                 <select class="form-select" aria-label="Número de Parcelas" id="installments">
                   <option value="1">1x sem juros</option>
                   <option value="2">2x sem juros</option>
                   <option value="3">3x sem juros</option>
                   <option value="4">4x sem juros</option>
                 </select>
               </div>
               <button type="submit" class="btn btn-primary">Finalizar</button>
             </form>
           </div>
         </div>
       </div>
     </div>
   </main>
   <!-- Bootstrap JavaScript -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
   <script>
     const calculateTotal = () => {
       let total = 0;
       const subtotals = document.querySelectorAll('.table tbody tr td:nth-child(5)');
       subtotals.forEach((subtotal) => {
         total += parseFloat(subtotal.innerText.replace('R$ ', '').replace(',', '.'));
       });
       return total.toFixed(2);
     };
   
     document.querySelector('.btn-success').addEventListener('click', () => {
       const totalAmount = calculateTotal();
       document.querySelector('#totalAmount').value = `R$ ${totalAmount}`;
     });
   
     document.querySelector('#splitPayment').addEventListener('change', (event) => {
       if (event.target.checked) {
         document.querySelector('#installmentSection').style.display = 'block';
       } else {
         document.querySelector('#installmentSection').style.display = 'none';
       }
     });
   
     document.querySelector('form').addEventListener('submit', (event) => {
       event.preventDefault();
       const amountPaid = parseFloat(document.querySelector('#amountPaid').value.replace(',', '.'));
       const totalAmount = parseFloat(document.querySelector('#totalAmount').value.replace('R$ ', '').replace(',', '.'));
       const change = amountPaid - totalAmount;
   
       if (change >= 0) {
         document.querySelector('#change').value = `R$ ${change.toFixed(2)}`;
         alert('Venda finalizada com sucesso!');
         // TODO: enviar dados para servidor
       } else {
         alert('Valor pago é insuficiente');
       }
     });
   </script>
   </body>
   </html>